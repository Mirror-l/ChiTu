{"version":3,"sources":["../out/Page.js"],"names":["define","require","exports","maishu_chitu_service_1","Errors_1","Application_1","Object","defineProperty","value","Page","params","data","showing","Callbacks","shown","hiding","hidden","closing","closed","_element","element","_app","app","_displayer","displayer","routeData","parseUrl","url","assign","values","_name","pageName","_url","fire","on_showing","currentPage","show","then","o","on_shown","on_hiding","hide","on_hidden","on_closing","parentElement","Errors","unexpectedNullValue","removeChild","on_closed","Promise","resolve","type","Service","service","error","add","sender","tagName","PageDisplayerImplement","page","previous","style","display"],"mappings":"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","sourcesContent":["define([\"require\", \"exports\", \"maishu-chitu-service\", \"./Errors\", \"./Application\"], function (require, exports, maishu_chitu_service_1, Errors_1, Application_1) {\n    \"use strict\";\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    class Page {\n        constructor(params) {\n            this.data = {};\n            this.showing = maishu_chitu_service_1.Callbacks();\n            this.shown = maishu_chitu_service_1.Callbacks();\n            this.hiding = maishu_chitu_service_1.Callbacks();\n            this.hidden = maishu_chitu_service_1.Callbacks();\n            this.closing = maishu_chitu_service_1.Callbacks();\n            this.closed = maishu_chitu_service_1.Callbacks();\n            this._element = params.element;\n            this._app = params.app;\n            this._displayer = params.displayer;\n            let routeData = Application_1.parseUrl(params.url);\n            this.data = Object.assign(routeData.values, params.data || {});\n            this._name = routeData.pageName;\n            this._url = params.url;\n        }\n        on_showing() {\n            return this.showing.fire(this, this.data);\n        }\n        on_shown() {\n            return this.shown.fire(this, this.data);\n        }\n        on_hiding() {\n            return this.hiding.fire(this, this.data);\n        }\n        on_hidden() {\n            return this.hidden.fire(this, this.data);\n        }\n        on_closing() {\n            return this.closing.fire(this, this.data);\n        }\n        on_closed() {\n            return this.closed.fire(this, this.data);\n        }\n        show() {\n            this.on_showing();\n            let currentPage = this._app.currentPage;\n            if (this == currentPage) {\n                currentPage = null;\n            }\n            return this._displayer.show(this, currentPage).then(o => {\n                this.on_shown();\n            });\n        }\n        hide(currentPage) {\n            this.on_hiding();\n            return this._displayer.hide(this, currentPage).then(o => {\n                this.on_hidden();\n            });\n        }\n        close() {\n            this.on_closing();\n            let parentElement = this._element.parentElement;\n            if (parentElement == null)\n                throw Errors_1.Errors.unexpectedNullValue();\n            parentElement.removeChild(this._element);\n            this.on_closed();\n            return Promise.resolve();\n        }\n        createService(type) {\n            type = type || maishu_chitu_service_1.Service;\n            let service = new type();\n            service.error.add((sender, error) => {\n                this._app.error.fire(this._app, error, this);\n            });\n            return service;\n        }\n        get element() {\n            return this._element;\n        }\n        get name() {\n            return this._name;\n        }\n        get url() {\n            return this._url;\n        }\n        get app() {\n            return this._app;\n        }\n    }\n    Page.tagName = 'div';\n    exports.Page = Page;\n    class PageDisplayerImplement {\n        show(page, previous) {\n            page.element.style.display = 'block';\n            if (previous != null) {\n                previous.element.style.display = 'none';\n            }\n            return Promise.resolve();\n        }\n        hide(page, previous) {\n            page.element.style.display = 'none';\n            if (previous != null) {\n                previous.element.style.display = 'block';\n            }\n            return Promise.resolve();\n        }\n    }\n    exports.PageDisplayerImplement = PageDisplayerImplement;\n});\n"],"file":"Page.js"}